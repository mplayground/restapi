try {
/* module-key = 'com.simplenia.confluence.plugins.spacetree:spacetree-macro-resources', location = 'scripts/spacetree.js' */
jQuery(function(a){AJS.spacetree={loadChildren:function(m,c,f,b,l){b=typeof b!=="undefined"?b:[];var j=a("#children"+c+"-"+f);j.html("<ul>Loading...</ul>");var e=AJS.Meta.getBoolean("spacetree-"+m+"-sortPages")?AJS.Meta.get("spacetree-"+m+"-sort"):"position";var h=AJS.Meta.getBoolean("spacetree-"+m+"-sortPages")?AJS.Meta.get("spacetree-"+m+"-reverse"):"false";var k=AJS.Meta.get("context-path")+"/plugins/spacetree/naturalchildren.action?decorator=none&excerpt=false&sort="+e+"&reverse="+h+"&disableLinks=false&hasRoot=true&treeId="+f+"&startDepth="+l+"&pageId="+c;for(var d=0,g=b.length;d<g;d++){k=k+"&ancestors="+b[d]}a.ajax({type:"GET",url:k,dataType:"text",success:function(i){j.html(i);AJS.spacetree.makePlusMinusButtonsClickable(j);a("#childrenspan"+AJS.Meta.get("spacetree-"+m+"-currentPageId")+"-"+f).addClass("highlighted");a("#plusminus"+c+"-"+f).removeClass("icon-plus").addClass("icon-minus")}})},getIdFromElementName:function(b){if(!b||b==undefined){return null}if(b.indexOf("plusminus")!=-1){return b.substring("plusminus".length)}if(b.indexOf("children")!=-1){return b.substring("children".length)}return null},makePlusMinusButtonsClickable:function(b){b.find("a.plugin_spacetree_childtoggle").each(function(){a(this).click(function(g){var d=AJS.spacetree.getIdFromElementName(a(this).attr("id"));var f=a("#children"+d);if(!f.children("ul[id]").length>0){var h=d.split("-");var c=a(this).closest("div.plugin_spacetree_container").data("macroid");AJS.spacetree.loadChildren(c,h[0],h[1],0)}else{if(a(this).hasClass("icon-plus")){a(this).removeClass("icon-plus");a(this).addClass("icon-minus");f.slideDown(300)}else{a(this).removeClass("icon-minus");a(this).addClass("icon-plus");f.slideUp(300)}}return AJS.stopEvent(g)})})},initSpacetrees:function(){var b=[];a("div.plugin_spacetree_container:first input[name=ancestorId]").each(function(){b.push(a(this).val())});a("div.plugin_spacetree_container").find("a.plugin_spacetree_childtoggle").each(function(){var c=a(this).closest("div.plugin_spacetree_container").data("macroid");if(a(this).data("spacekey")===AJS.Meta.get("space-key")&&(AJS.Meta.getBoolean("spacetree-"+c+"-expandChildren")||b.length>0)){var e=AJS.spacetree.getIdFromElementName(a(this).attr("id"));var d=e.split("-")[0];var g=e.split("-")[1];var f=AJS.Meta.get("spacetree-"+c+"-startDepth");AJS.spacetree.loadChildren(c,d,g,b,f)}});AJS.spacetree.makePlusMinusButtonsClickable(a("div.plugin_spacetree_container"))}};AJS.spacetree.initSpacetrees()});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}


